var api={showID:369,key:"rKaf87VbXLvtXCNhYAjDHZcJfP7QYjvL"},baseURL="https://api-public.guidebox.com/v1.43/US/"+api.key+"/show/"+api.showID+"/",showTracker={init:function(){console.log("Initializing app (init)"),window.setTimeout(this.updateShowTitle,1e3),window.setTimeout(this.listSeasons,2e3),window.setTimeout(this.listEpisodes,3e3)},formatDate:function(e){console.log("Formatting dates from API (formatDate)");var t,s,i;return e=new Date(e),t=e.getDate(),s=e.getMonth(),i=e.getFullYear(),s+=1,e=t+"/"+s+"/"+i},resetEpisodeTable:function(){console.log("Resetting episode table (resetEpisodeTable)");var e="<thead><tr><th>Thumb</th><th>Episódio</th><th>Descrição</th><th>Assistido</th></tr></thead>";$("#episodes").html(e);var t='<img src="img/loading.gif" class="loader" width="20" alt="">';$("#episodes").parent().append(t)},markEpisodeAsWatched:function(e){console.log("Marking episode as Watched (markEpisodeAsWatched)"),$(e).parent().parent().toggleClass("watched")},updateShowTitle:function(){console.log("Updating Show Title (updateShowTitle)"),$.getJSON(baseURL,function(e){$("h1").text(e.title)})},updateSeasonTitle:function(e){console.log("Updating Season Title (updateSeasonTitle)"),$("h3").text(e+"ª Temporada")},listSeasons:function(){console.log("Creating Season List (listSeasons)");var e=showTracker.formatDate,t=baseURL+"seasons";$.getJSON(t,function(t){var s=t.results;$("#seasons img.loader").remove(),$.each(s,function(t){var s=this.season_number,i=e(this.first_airdate),o=$("<li></li>"),a=$("<a>Link</a>");o.attr("data-season",s),a.attr("href","#"),a.text(s+"ª Temporada - "+i),o.append(a),showTracker.bindSeasonEvents(o),$("#seasons").append(o)}),$("#seasons").children().first().addClass("active")})},listEpisodes:function(e){console.log("Creating Episode List (listEpisodes)"),e=e||1;var t=baseURL+"episodes/"+e+"/1/30";$.getJSON(t,function(e){var t=e.results;$("img.loader").remove(),$.each(t,function(e){episodeNumber=t[e].episode_number,episodeTitle=t[e].title,episodeOverview=t[e].overview,episodeThumb=t[e].thumbnail_208x117;var s=$("<tr></tr>"),i=$("<td>"),o=$("<td>"),a=$("<td>"),n=$("<td>"),d=$("<img>"),r=$("<input>");d.attr("src",episodeThumb),o.attr("width","20%"),r.attr("type","checkbox"),o.text(episodeNumber+" - "+episodeTitle),a.text(episodeOverview),i.append(d),n.append(r),s.append([i,o,a,n]),showTracker.bindEpisodeEvents(r),$("#episodes").prepend(s)})})},bindSeasonEvents:function(e){console.log("Binding events to Season List (bindSeasonEvents)"),$(e).click(function(){$(this).addClass("active"),$(this).siblings().removeClass("active");var e=$(this).attr("data-season");showTracker.resetEpisodeTable(),showTracker.updateSeasonTitle(e),showTracker.listEpisodes(e)})},bindEpisodeEvents:function(e){console.log("Binding events to Episode List (bindEpisodeEvents)"),$(e).click(function(){showTracker.markEpisodeAsWatched(this)})}};showTracker.init();